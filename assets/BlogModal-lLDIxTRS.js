import{b as w,r as f,j as e,i as j,S as E,I as S,g as p}from"./index-usQaeIIn.js";import{D as b,a as W,b as T,c as L}from"./BlogCard-BjPdS4ka.js";import{M as o}from"./MenuItem-Bs2WFw6a.js";const k=({open:c,onClose:d,onSave:y,initialBlog:r})=>{const{user:i}=w(),u={id:crypto.randomUUID(),title:"",content:"",category:"",authorId:i?.id??"",date:new Date().toISOString(),image:""},[t,a]=f.useState(u);f.useEffect(()=>{c&&a(r||{...u,id:crypto.randomUUID(),authorId:i?.id??""})},[c,r,i]);const v=n=>{const g=n.target.files?.[0];if(!g)return;const h=new FileReader;h.onloadend=()=>{const l=new Image;l.src=h.result,l.onload=()=>{const s=document.createElement("canvas"),m=800,D=m/l.width;s.width=m,s.height=l.height*D;const x=s.getContext("2d");if(!x)return;x.drawImage(l,0,0,s.width,s.height);const C=s.toDataURL("image/jpeg",.7);a(U=>({...U,image:C}))}},h.readAsDataURL(g)},I=()=>{y(t),a({...u,id:crypto.randomUUID(),authorId:i?.id??""}),d()};return e.jsxs(b,{open:c,onClose:d,fullWidth:!0,maxWidth:"sm",children:[e.jsx(W,{children:r?"Edit Blog":"Create Blog"}),e.jsxs(T,{children:[e.jsx(j,{label:"Title",fullWidth:!0,margin:"normal",value:t.title,onChange:n=>a({...t,title:n.target.value})}),e.jsx(j,{label:"Content",fullWidth:!0,margin:"normal",multiline:!0,rows:6,value:t.content,onChange:n=>a({...t,content:n.target.value})}),e.jsxs(E,{fullWidth:!0,value:t.category,onChange:n=>a({...t,category:n.target.value}),displayEmpty:!0,sx:{my:2},children:[e.jsx(o,{value:"",children:"Select Category"}),e.jsx(o,{value:"Tech",children:"Tech"}),e.jsx(o,{value:"Lifestyle",children:"Lifestyle"}),e.jsx(o,{value:"Education",children:"Education"})]}),e.jsx(S,{type:"file",onChange:v,sx:{my:2}})]}),e.jsxs(L,{children:[e.jsx(p,{onClick:d,children:"Cancel"}),e.jsx(p,{variant:"contained",onClick:I,children:r?"Update":"Publish"})]})]})};export{k as B};
