import{b as w,k as T,h as D,f as L,r as g,j as e,T as h,B as W,i as j,S as F,I as R,g as k}from"./index-DpcyShyN.js";import{M as d}from"./MenuItem-YHpfEsvK.js";const M=()=>{const{user:o}=w(),{id:n}=T(),m=D(),{blogs:x,addBlog:I,updateBlog:B}=L(),c={id:crypto.randomUUID(),title:"",content:"",category:"",authorId:o?.id??"",date:new Date().toISOString(),image:"",isFavorite:!1},[t,r]=g.useState(c),[f,p]=g.useState("");g.useEffect(()=>{if(n){const a=x.find(l=>l.id===n);a&&a.authorId===o?.id?r(a):m("/")}else r({...c,id:crypto.randomUUID(),authorId:o?.id??""})},[n,x,o]);const C=a=>{const l=a.target.files?.[0];if(!l)return;const u=new FileReader;u.onloadend=()=>{const s=new Image;s.src=u.result,s.onload=()=>{const i=document.createElement("canvas"),y=800,U=y/s.width;i.width=y,i.height=s.height*U;const v=i.getContext("2d");if(!v)return;v.drawImage(s,0,0,i.width,i.height);const E=i.toDataURL("image/jpeg",.7);r(S=>({...S,image:E}))}},u.readAsDataURL(l)},b=()=>{if(!t.title.trim()||!t.content.trim()||!t.category.trim()){p("Title, content, and category are required.");return}p(""),n?B(t):I(t),r({...c,id:crypto.randomUUID(),authorId:o?.id??""}),m("/")};return o?e.jsxs(W,{maxWidth:"600px",mx:"auto",mt:4,children:[e.jsx(h,{variant:"h5",mb:2,children:n?"Edit Blog":"Create Blog"}),e.jsx(j,{label:"Title",fullWidth:!0,margin:"normal",value:t.title,onChange:a=>r({...t,title:a.target.value})}),e.jsx(j,{label:"Content",fullWidth:!0,multiline:!0,rows:6,margin:"normal",value:t.content,onChange:a=>r({...t,content:a.target.value})}),e.jsxs(F,{fullWidth:!0,displayEmpty:!0,value:t.category,onChange:a=>r({...t,category:a.target.value}),sx:{my:2},children:[e.jsx(d,{value:"",children:"Select Category"}),e.jsx(d,{value:"Tech",children:"Tech"}),e.jsx(d,{value:"Lifestyle",children:"Lifestyle"}),e.jsx(d,{value:"Education",children:"Education"})]}),e.jsx(R,{type:"file",onChange:C,sx:{my:2}}),f&&e.jsx(h,{color:"error",mb:2,children:f}),e.jsx(k,{variant:"contained",onClick:b,children:n?"Update Blog":"Publish Blog"})]}):e.jsx(h,{children:"Login required to create/edit blogs."})};export{M as default};
